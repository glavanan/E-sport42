<div class="row">
    <div class="col-md-4 col-md-offset-4">
        <h1>Register</h1>
        <div class="well">
            <form role="form" name="registerForm" ng-submit="vm.registerMandatory(registerForm.$valid)" ng-if="!vm.next">

                <div class="form-group"
                        ng-class="{'has-success': registerForm.email.$valid,
                                    'has-error': registerForm.email.$dirty && registerForm.email.$invalid}">
                    <label for="register__email">Email</label>
                    <input type="email"
                           name="email"
                           class="form-control"
                           id="register__email"
                           placeholder="example@example.com"
                           ng-model="vm.form.email"
                           ng-pattern="vm.EMAIL_REGEXP"
                           ng-model-options="{ updateOn: 'default blur', debounce: { default: 500, blur: 0 } }"
                           ng-required="true" autofocus/>
                    <ng-messages ng-if="registerForm.email.$dirty" for="registerForm.email.$error" class="text-danger">
                        <ng-message when="required">L'email est requis pour l'inscription.</ng-message>
                        <ng-message when="pattern">L'email entré doit etre valide.</ng-message>
                    </ng-messages>
                </div>

                <div class="form-group"
                        ng-class="{'has-success': registerForm.username.$valid,
                                    'has-error': registerForm.username.$dirty && registerForm.username.$invalid}">
                    <label for="register__username">Pseudo</label>
                    <input type="text"
                           class="form-control"
                           id="register__username"
                           placeholder="XxKittyKatdu94xX"
                           name="username"
                           ng-model="vm.form.username"
                           ng-model-options="{ updateOn: 'default blur', debounce: { default: 500, blur: 0 } }"
                           minlength="3"
                           maxlength="30"
                           required/>
                    <ng-messages ng-if="registerForm.username.$dirty" for="registerForm.username.$error" class="text-danger">
                        <ng-message when="required">Le pseudo est requis pour l'inscription.</ng-message>
                        <ng-message when="minlength">Le pseudo est trop court.</ng-message>
                        <ng-message when="maxlength">Le pseudo est trop long.</ng-message>
                    </ng-messages>
                </div>

                <div class="form-group"
                        ng-class="{'has-success': registerForm.password.$valid,
                                    'has-error': registerForm.password.$dirty && registerForm.password.$invalid}">
                    <label for="register__password">Mot de passe</label>
                    <input type="password"
                           class="form-control"
                           id="register__password"
                           name="password"
                           ng-model="vm.form.password"
                           ng-model-options="{ updateOn: 'default blur', debounce: { default: 500, blur: 0 } }"
                           minlength="5"
                           required/>
                    <ng-messages ng-if="registerForm.password.$dirty" for="registerForm.password.$error" class="text-danger">
                        <ng-message when="required">Le mot de passe est requis pour l'inscription.</ng-message>
                        <ng-message when="minlength">Le mot de passe est trop court.</ng-message>
                    </ng-messages>
                    <div ng-if="registerForm.password.$valid">
                        <input type="password"
                                placeholder="Confirmation"
                                name="passwordConfirm"
                                ng-model="vm.passwordConfirm"
                                ng-model-options="{ updateOn: 'default blur', debounce: { default: 500, blur: 0 } }"
                                equals="{{ vm.form.password }}"
                                required/>
                        <ng-messages ng-if="registerForm.passwordConfirm.$dirty" for="registerForm.passwordConfirm.$error" class="text-danger">
                            <ng-message when="required">Le mot de passe est requis pour l'inscription.</ng-message>
                            <ng-message when="equals">Le mot de passe est différent.</ng-message>
                        </ng-messages>
                    </div>
                </div>

                <div ng-if="vm.next" class="form-group"
                        ng-class="{'has-success': registerForm.firstName.$valid,
                                    'has-error': registerForm.firstName.$dirty && registerForm.firstName.$invalid}">
                    <label for="register__firstName">Prénom</label>
                    <input type="text"
                           name="firstName"
                           class="form-control"
                           id="register__firstName"
                           placeholder="example@example.com"
                           ng-model="vm.form.firstName"
                           ng-model-options="{ updateOn: 'default blur', debounce: { default: 500, blur: 0 } }"
                           maxlength="20"
                           />
                    <ng-messages ng-if="registerForm.firstName.$dirty" for="registerForm.firstName.$error" class="text-danger">
                        <ng-message when="maxlength">Le prénom est trop long... Désolé :(.</ng-message>
                    </ng-messages>
                </div>

                <div class="form-group">
                    <button type="submit" class="btn btn-primary">Crée-moi un compte !</button>
                </div>
            </form>
            <form role="form" name="registerOptional" ng-submit="vm.registerOptional(registerOptional.$valid)" ng-if="vm.next">
                <div class="form-group"
                        ng-class="{'has-success': registerOptional.firstName.$valid,
                                    'has-error': registerOptional.firstName.$dirty && registerOptional.firstName.$invalid}">
                    <label for="register__firstName">Prénom</label>
                    <input type="text"
                           name="firstName"
                           class="form-control"
                           id="register__firstName"
                           placeholder="Jean-Jacques"
                           ng-model="vm.form.firstName"
                           ng-model-options="{ updateOn: 'default blur', debounce: { default: 500, blur: 0 } }"
                           ng-maxlength="20"
                           autofocus/>
                    <ng-messages ng-if="registerOptional.firstName.$dirty" for="registerOptional.firstName.$error" class="text-danger">
                        <ng-message when="maxlength">Le prénom est trop long... Désolé :(.</ng-message>
                    </ng-messages>
                </div>

                <div class="form-group">
                    <button type="submit" class="btn btn-primary">Ajoute moi ces infos-là !</button>
                </div>
            </form>
        </div>
    </div>
</div>
